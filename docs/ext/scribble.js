!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fs")):"function"==typeof define&&define.amd?define(["fs"],t):"object"==typeof exports?exports.scribble=t(require("fs")):n.scribble=t(n.fs)}(window,function(n){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)e.d(r,i,function(t){return n[t]}.bind(null,i));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=7)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNote=function(n){return/^[a-gA-G](?:#|b)?\d$/.test(n)},t.expandStr=function(n){return n=(n=(n=(n=JSON.stringify(n.split(""))).replace(/,"\[",/g,", [")).replace(/"\[",/g,"[")).replace(/,"\]"/g,"]"),JSON.parse(n)},t.shuffle=function(n){var t=n.length-1;return n.forEach(function(e,r){var i=Math.round(Math.random()*t);n[r]=n[i],n[i]=e}),n},t.sizzleMap=function(n){void 0===n&&(n=127);var t=Math.PI,e=[t/6,t/4,t/3,t/2,2*t/3,3*t/4,5*t/6,t],r=[0,t/6,t/4,t/3,t/2,2*t/3,3*t/4,5*t/6];return r.reverse(),e.concat(r).map(function(t){return Math.round(Math.sin(t)*n)})},t.pickOne=function(n){return n.length>1?n[Math.round(Math.random())]:n[0]},t.dice=function(){return!!Math.round(Math.random())}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(4),i=r.Chord.names(),o=e(0);t.getChord=function(n){if(o.isNote(n))throw new Error(n+" is not a chord!");var t=n.split("-"),e=r.Chord.tokenize(t[0]),i=e[0],u=e[1];"4"!==i[1]&&"5"!==i[1]||(u=i[1],i=i.replace(/\d/,""));var a={"4th":"4","5th":"5","7th":"7","9th":"9","11th":"11","13th":"13"};if(a[u]&&(u=a[u]),!r.Chord.exists(u))throw new TypeError("Invalid chord name: "+u);return(r.chord(u)||[]).map(function(n){var e=r.transpose.bind(null,i+(t[1]||4))(n);return r.Note.simplify(e)})},t.chords=function(){var n={4:"4th",5:"5th",7:"7th",9:"9th",11:"11th",13:"13th"};return i.map(function(t){return/^\d+$/.test(t)&&n[t]?n[t]:t})}},function(n,t,e){"use strict";var r=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(e(4));t.getScale=function(n){n=(n=(n=n&&n.toLowerCase()).replace("#5p","#5P")).replace("#7m","#7M");var t=i.Scale.tokenize(n)[1];if(!i.Scale.exists(t))throw new Error(n+" does not exist!");return i.Scale.notes(n).map(i.Note.simplify)},t.scales=function(){return i.Scale.names()}},function(n,t,e){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=e(0),o=e(1),u="undefined"!=typeof window&&e(8),a={"1n":512,"2n":256,"4n":128,"8n":64,"16n":32};t.clip=function(n){if("string"==typeof(n=r({},{notes:["C4"],pattern:"x",shuffle:!1,sizzle:!1,sizzleReps:1,arpegiate:!1,subdiv:"4n",amp:100,accentLow:70,randomNotes:null},n||{})).notes&&(n.notes=n.notes.replace(/\s{2,}/g," "),n.notes=n.notes.split(" ")),n.notes=n.notes.map(function(n){return i.isNote(n)?[n]:Array.isArray(n)?(n.forEach(function(n){if(!i.isNote(n))throw new TypeError("array must comprise valid notes")}),n):!Array.isArray(n)&&o.getChord(n)?n=o.getChord(n):void 0}),/[^x\-_\[\]R]/.test(n.pattern))throw new TypeError("pattern can only comprise x - _ [ ], found "+n.pattern);if(n.shuffle&&(n.notes=i.shuffle(n.notes)),n.randomNotes&&"string"==typeof n.randomNotes&&(n.randomNotes=n.randomNotes.replace(/\s{2,}/g," "),n.randomNotes=n.randomNotes.split(/\s/)),n.randomNotes&&(n.randomNotes=n.randomNotes.map(function(n){return[n]})),n.synth||n.instrument||n.sample||n.buffer||n.player||n.samples||n.sampler)return u(n);var t=[],e=0,s=function(r,i){r.forEach(function(r){if("string"==typeof r){var o=null;"x"===r&&(o=n.notes[e],e++),"R"===r&&(Math.round(Math.random())||n.randomNotes)&&(o=n.randomNotes?n.randomNotes[Math.round(Math.random()*(n.randomNotes.length-1))]:n.notes[e],e++),"x"!==r&&"-"!==r&&"R"!==r||t.push({note:o,length:i,level:"R"!==r||n.randomNotes?n.amp:n.accentLow}),"_"===r&&t.length&&(t[t.length-1].length+=i),e===n.notes.length&&(e=0)}Array.isArray(r)&&s(r,i/r.length)})};if(s(i.expandStr(n.pattern),a[n.subdiv]||a["4n"]),n.sizzle){var c=[],m=!0===n.sizzle?"sin":n.sizzle,l=t.length,f=n.amp,d=n.sizzleReps,p=f/(l/d);if("sin"===m||"cos"===m)for(var P=0;P<l;P++){var M=Math[m](P*Math.PI/(l/d))*f;c.push(Math.round(Math.abs(M)))}if("rampUp"===m)for(M=0,P=0;P<l;P++)P%(l/d)==0?M=0:M+=p,c.push(Math.round(Math.abs(M)));if("rampDown"===m)for(M=f,P=0;P<l;P++)P%(l/d)==0?M=f:M-=p,c.push(Math.round(Math.abs(M)));for(P=0;P<c.length;P++)t[P].level=c[P]?c[P]:1}if(n.accent){if(/[^x\-]/.test(n.accent))throw new TypeError("Accent can only have x and - characters");for(var h=0,v=0,y=t;v<y.length;v++){var b=y[v];M="x"===n.accent[h]?n.amp:n.accentLow;n.sizzle&&(M=(b.level+M)/2),b.level=Math.round(M),(h+=1)===n.accent.length&&(h=0)}}return t}},function(n,t,e){"use strict";e.r(t);var r={};e.r(r),e.d(r,"names",function(){return f}),e.d(r,"tokenize",function(){return M}),e.d(r,"props",function(){return y}),e.d(r,"name",function(){return b}),e.d(r,"pc",function(){return g}),e.d(r,"midi",function(){return A}),e.d(r,"midiToFreq",function(){return _}),e.d(r,"freq",function(){return O}),e.d(r,"freqToMidi",function(){return w}),e.d(r,"chroma",function(){return E}),e.d(r,"oct",function(){return C}),e.d(r,"stepToLetter",function(){return I}),e.d(r,"altToAcc",function(){return x}),e.d(r,"from",function(){return S}),e.d(r,"build",function(){return k}),e.d(r,"fromMidi",function(){return R}),e.d(r,"simplify",function(){return D}),e.d(r,"enharmonic",function(){return z});var i={};e.r(i),e.d(i,"range",function(){return q}),e.d(i,"rotate",function(){return F}),e.d(i,"compact",function(){return B}),e.d(i,"sort",function(){return V}),e.d(i,"unique",function(){return L}),e.d(i,"shuffle",function(){return U}),e.d(i,"permutations",function(){return G});var o={};e.r(o),e.d(o,"names",function(){return W}),e.d(o,"tokenize",function(){return J}),e.d(o,"qToAlt",function(){return nn}),e.d(o,"altToQ",function(){return tn}),e.d(o,"props",function(){return un}),e.d(o,"num",function(){return an}),e.d(o,"name",function(){return sn}),e.d(o,"semitones",function(){return cn}),e.d(o,"chroma",function(){return mn}),e.d(o,"ic",function(){return ln}),e.d(o,"build",function(){return fn}),e.d(o,"simplify",function(){return dn}),e.d(o,"invert",function(){return pn}),e.d(o,"fromSemitones",function(){return hn});var u={};e.r(u),e.d(u,"transpose",function(){return Tn}),e.d(u,"trFifths",function(){return jn}),e.d(u,"fifths",function(){return wn}),e.d(u,"transposeBy",function(){return En}),e.d(u,"addIntervals",function(){return In}),e.d(u,"add",function(){return Nn}),e.d(u,"subtract",function(){return xn}),e.d(u,"interval",function(){return Sn}),e.d(u,"semitones",function(){return kn});var a={};e.r(a),e.d(a,"chroma",function(){return Bn}),e.d(a,"chromas",function(){return Vn}),e.d(a,"modes",function(){return Ln}),e.d(a,"isChroma",function(){return Gn}),e.d(a,"intervals",function(){return $n}),e.d(a,"isEqual",function(){return Kn}),e.d(a,"isSubsetOf",function(){return Qn}),e.d(a,"isSupersetOf",function(){return Wn}),e.d(a,"includes",function(){return Jn}),e.d(a,"filter",function(){return Xn});var s={};e.r(s),e.d(s,"dictionary",function(){return Zn}),e.d(s,"combine",function(){return nt}),e.d(s,"scale",function(){return tt}),e.d(s,"chord",function(){return et}),e.d(s,"pcset",function(){return rt});var c={};e.r(c),e.d(c,"props",function(){return ot}),e.d(c,"names",function(){return ut}),e.d(c,"intervals",function(){return at}),e.d(c,"notes",function(){return st}),e.d(c,"exists",function(){return ct}),e.d(c,"tokenize",function(){return mt}),e.d(c,"modeNames",function(){return lt}),e.d(c,"chords",function(){return ft}),e.d(c,"toScale",function(){return dt}),e.d(c,"supersets",function(){return pt}),e.d(c,"subsets",function(){return Pt});var m={};e.r(m),e.d(m,"names",function(){return Mt}),e.d(m,"props",function(){return vt}),e.d(m,"intervals",function(){return yt}),e.d(m,"notes",function(){return bt}),e.d(m,"exists",function(){return gt}),e.d(m,"supersets",function(){return At}),e.d(m,"subsets",function(){return _t}),e.d(m,"tokenize",function(){return Tt});var l="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),f=function(n){return"string"!=typeof n?l.slice():l.filter(function(t){var e=t[1]||" ";return-1!==n.indexOf(e)})},d=f(" #"),p=f(" b"),P=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function M(n){"string"!=typeof n&&(n="");var t=P.exec(n);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}var h=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),v=[0,2,4,5,7,9,11],y=function(n,t){return void 0===t&&(t={}),function(e){return t[e]||(t[e]=n(e))}}(function(n){var t=M(n);if(""===t[0]||""!==t[3])return h;var e=t[0],r=t[1],i=t[2],o={letter:e,acc:r,octStr:i,pc:e+r,name:e+r+i,step:(e.charCodeAt(0)+3)%7,alt:"b"===r[0]?-r.length:r.length,oct:i.length?+i:null,chroma:0,midi:null,freq:null};return o.chroma=(v[o.step]+o.alt+120)%12,o.midi=null!==o.oct?v[o.step]+o.alt+12*(o.oct+1):null,o.freq=_(o.midi),Object.freeze(o)}),b=function(n){return y(n).name},g=function(n){return y(n).pc},A=function(n){if("number"!=typeof n&&"string"!=typeof n)return null;var t,e=y(n).midi,r=e||0===e?e:+n;return(t=r)>=0&&t<=127?r:null},_=function(n,t){return void 0===t&&(t=440),"number"==typeof n?Math.pow(2,(n-69)/12)*t:null},O=function(n){return y(n).freq||_(n)},T=Math.log(2),j=Math.log(440),w=function(n){var t=12*(Math.log(n)-j)/T+69;return Math.round(100*t)/100},E=function(n){return y(n).chroma},C=function(n){return y(n).oct},I=function(n){return"CDEFGAB"[n]},N=function(n,t){return Array(t+1).join(n)},x=function(n){return function(n,t){return"number"!=typeof n?"":t(n)}(n,function(n){return n<0?N("b",-n):N("#",n)})},S=function(n,t){void 0===n&&(n={}),void 0===t&&(t=null);var e=t?Object.assign({},y(t),n):n,r=e.step,i=e.alt,o=e.oct;if("number"!=typeof r)return null;var u=I(r);if(!u)return null;var a=u+x(i);return o||0===o?a+o:a},k=S;function R(n,t){return void 0===t&&(t=!1),n=Math.round(n),(!0===t?d:p)[n%12]+(Math.floor(n/12)-1)}var D=function(n,t){void 0===t&&(t=!0);var e=y(n),r=e.alt,i=e.chroma,o=e.midi;if(null===i)return null;var u=!1===t?r<0:r>0;return null===o?g(R(i,u)):R(o,u)},z=function(n){return D(n,!1)};function q(n,t){return null===n||null===t?[]:n<t?function(n,t){for(var e=[];t--;e[t]=t+n);return e}(n,t-n+1):function(n,t){for(var e=[];t--;e[t]=n-t);return e}(n,n-t+1)}function F(n,t){var e=t.length,r=(n%e+e)%e;return t.slice(r,e).concat(t.slice(0,r))}var B=function(n){return n.filter(function(n){return 0===n||n})},H=function(n){var t=y(n).midi;return null!==t?t:y(n+"-100").midi};function V(n){return B(n.map(b)).sort(function(n,t){return H(n)>H(t)})}function L(n){return V(n).filter(function(n,t,e){return 0===t||n!==e[t-1]})}var U=function(n,t){var e,r;void 0===t&&(t=Math.random);for(var i=n.length;i;)e=t()*i--|0,r=n[i],n[i]=n[e],n[e]=r;return n},G=function(n){return 0===n.length?[[]]:G(n.slice(1)).reduce(function(t,e){return t.concat(n.map(function(t,r){var i=e.slice();return i.splice(r,0,n[0]),i}))},[])},Y=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),$=[0,2,4,5,7,9,11],K=[0,1,2,3,4,5,6,5,4,3,2,1],Q="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),W=function(n){return"string"!=typeof n?Q.slice():Q.filter(function(t){return-1!==n.indexOf(t[1])})},J=function(n){var t=Y.exec(""+n);return null===t?null:t[1]?[t[1],t[2]]:[t[4],t[3]]},X=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null}),Z=function(n,t){return Array(Math.abs(t)+1).join(n)},nn=function(n,t){return"M"===t&&"M"===n?0:"P"===t&&"P"===n?0:"m"===t&&"M"===n?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?"P"===n?-t.length:-t.length-1:null},tn=function(n,t){return 0===t?"M"===n?"M":"P":-1===t&&"M"===n?"m":t>0?Z("A",t):t<0?Z("d","P"===n?t:t+1):null},en=function(n){return(Math.abs(n)-1)%7},rn=function(n){var t=J(n);if(null===t)return X;var e={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return e.num=+t[0],e.q=t[1],e.step=en(e.num),e.type="PMMPPMM"[e.step],"M"===e.type&&"P"===e.q?X:(e.name=""+e.num+e.q,e.dir=e.num<0?-1:1,e.simple=8===e.num||-8===e.num?e.num:e.dir*(e.step+1),e.alt=nn(e.type,e.q),e.oct=Math.floor((Math.abs(e.num)-1)/7),e.semitones=e.dir*($[e.step]+e.alt+12*e.oct),e.chroma=(e.dir*($[e.step]+e.alt)%12+12)%12,Object.freeze(e))},on={};function un(n){return"string"!=typeof n?X:on[n]||(on[n]=rn(n))}var an=function(n){return un(n).num},sn=function(n){return un(n).name},cn=function(n){return un(n).semitones},mn=function(n){return un(n).chroma},ln=function(n){return"string"==typeof n&&(n=un(n).chroma),"number"==typeof n?K[n%12]:null},fn=function(n){var t=void 0===n?{}:n,e=t.num,r=t.step,i=t.alt,o=t.oct,u=void 0===o?1:o,a=t.dir;if(void 0!==r&&(e=r+1+7*u),void 0===e)return null;if("number"!=typeof i)return null;var s="number"!=typeof a?"":a<0?"-":"",c="PMMPPMM"[en(e)];return s+e+tn(c,i)},dn=function(n){var t=un(n);if(t===X)return null;var e=t;return e.simple+e.q},pn=function(n){var t=un(n);if(t===X)return null;var e=t,r=(7-e.step)%7,i="P"===e.type?-e.alt:-(e.alt+1);return fn({step:r,alt:i,oct:e.oct,dir:e.dir})},Pn=[1,2,2,3,3,4,5,5,6,6,7,7],Mn="P m M m M P d P m M m M".split(" "),hn=function(n){var t=n<0?-1:1,e=Math.abs(n),r=e%12,i=Math.floor(e/12);return t*(Pn[r]+7*i)+Mn[r]},vn=[0,2,4,-1,1,3,5],yn=vn.map(function(n){return Math.floor(7*n/12)}),bn=[3,0,4,1,5,2,6];var gn=function(n,t,e){var r=bn[function(n){var t=(n+1)%7;return t<0?7+t:t}(n)],i=Math.floor((n+1)/7);return void 0===t?{step:r,alt:i,dir:e}:{step:r,alt:i,oct:t+4*i+yn[r],dir:e}},An=function(n){return function(n,t){return void 0===t&&(t={}),function(e){return t[e]||(t[e]=n(e))}}(function(t){var e=n(t);return null===e.name?null:function(n){var t=n.step,e=n.alt,r=n.oct,i=n.dir;void 0===i&&(i=1);var o=vn[t]+7*e;return null===r?[i*o]:[i*o,i*(r-yn[t]-4*e)]}(e)})},_n=An(y),On=An(un);function Tn(n,t){if(1===arguments.length)return function(t){return Tn(n,t)};var e=_n(n),r=On(t);if(null===e||null===r)return null;var i=1===e.length?[e[0]+r[0]]:[e[0]+r[0],e[1]+r[1]];return k(gn(i[0],i[1]))}function jn(n,t){if(1===arguments.length)return function(t){return jn(n,t)};var e=_n(n);return null===e?null:k(gn(e[0]+t))}function wn(n,t){if(1===arguments.length)return function(t){return wn(n,t)};var e=_n(n),r=_n(t);return null===r||null===e?null:r[0]-e[0]}function En(n,t){return 1===arguments.length?function(t){return Tn(t,n)}:Tn(t,n)}var Cn=function(n){return 7*(t=n)[0]+12*t[1]<0?gn(-n[0],-n[1],-1):gn(n[0],n[1],1);var t};function In(n,t,e){var r=On(n),i=On(t);if(null===r||null===i)return null;var o=[r[0]+e*i[0],r[1]+e*i[1]];return fn(Cn(o))}function Nn(n,t){return 1===arguments.length?function(t){return Nn(n,t)}:In(n,t,1)}function xn(n,t){return 1===arguments.length?function(t){return Nn(n,t)}:In(n,t,-1)}function Sn(n,t){if(1===arguments.length)return function(t){return Sn(n,t)};var e=_n(n),r=_n(t);if(null===e||null===r||e.length!==r.length)return null;var i=1===e.length?[r[0]-e[0],-Math.floor(7*(r[0]-e[0])/12)]:[r[0]-e[0],r[1]-e[1]];return fn(Cn(i))}function kn(n,t){if(1===arguments.length)return function(t){return kn(n,t)};var e=y(n),r=y(t);return null!==e.midi&&null!==r.midi?r.midi-e.midi:null!==e.chroma&&null!==r.chroma?(r.chroma-e.chroma+12)%12:null}var Rn=e(5),Dn=e(6),zn=function(n){return E(n)||mn(n)||0},qn=function(n){return parseInt(Bn(n),2)},Fn=function(n){return n.replace(/0/g,"").length};function Bn(n){if(Gn(n))return n;if(!Array.isArray(n))return"";var t=[0,0,0,0,0,0,0,0,0,0,0,0];return n.map(zn).forEach(function(n){t[n]=1}),t.join("")}var Hn=null;function Vn(n){return Hn=Hn||q(2048,4095).map(function(n){return n.toString(2)}),"number"==typeof n?Hn.filter(function(t){return Fn(t)===n}):Hn.slice()}function Ln(n,t){t=!1!==t;var e=Bn(n).split("");return B(e.map(function(n,r){var i=F(r,e);return t&&"0"===i[0]?null:i.join("")}))}var Un=/^[01]{12}$/;function Gn(n){return Un.test(n)}var Yn="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function $n(n){return Gn(n)?B(n.split("").map(function(n,t){return"1"===n?Yn[t]:null})):[]}function Kn(n,t){return 1===arguments.length?function(t){return Kn(n,t)}:Bn(n)===Bn(t)}function Qn(n,t){return arguments.length>1?Qn(n)(t):(n=qn(n),function(t){return(t=qn(t))!==n&&(t&n)===t})}function Wn(n,t){return arguments.length>1?Wn(n)(t):(n=qn(n),function(t){return(t=qn(t))!==n&&(t|n)===t})}function Jn(n,t){return arguments.length>1?Jn(n)(t):(n=Bn(n),function(t){return"1"===n[zn(t)]})}function Xn(n,t){return 1===arguments.length?function(t){return Xn(n,t)}:t.filter(Jn(n))}var Zn=function(n){var t=Object.keys(n).sort(),e=[],r=[],i=function(n,t,i){e[n]=t,r[i]=r[i]||[],r[i].push(n)};t.forEach(function(t){var e=n[t][0].split(" "),r=n[t][1],o=Bn(e);i(t,e,o),r&&r.forEach(function(n){return i(n,e,o)})});var o=Object.keys(e).sort(),u=function(n){return e[n]};return u.names=function(n){return"string"==typeof n?(r[n]||[]).slice():(!0===n?o:t).slice()},u},nt=function(n,t){var e=function(e){return n(e)||t(e)};return e.names=function(e){return n.names(e).concat(t.names(e))},e},tt=Zn(Rn),et=Zn(Dn),rt=nt(tt,et),it=Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}),ot=function(n,t){return function(e){return t[e]||(t[e]=n(e))}}(function(n){var t=tt(n);if(!t)return it;var e={intervals:t,name:n};return e.chroma=Bn(t),e.setnum=parseInt(e.chroma,2),e.names=tt.names(e.chroma),Object.freeze(e)},{}),ut=tt.names,at=function(n){var t=mt(n);return ot(t[1]).intervals};function st(n,t){var e=mt(n);return t=t||e[1],at(t).map(Tn(e[0]))}function ct(n){var t=mt(n);return void 0!==tt(t[1])}function mt(n){if("string"!=typeof n)return["",""];var t=n.indexOf(" "),e=b(n.substring(0,t))||b(n)||"",r=""!==e?n.substring(e.length+1):n;return[e,r.length?r:""]}var lt=function(n){var t=at(n),e=st(n);return Ln(t).map(function(n,r){var i=tt.names(n)[0];if(i)return[e[r]||t[r],i]}).filter(function(n){return n})},ft=function(n){var t=Qn(at(n));return et.names().filter(function(n){return t(et(n))})},dt=function(n){var t=B(n.map(g));if(!t.length)return t;var e=t[0],r=L(t);return F(r.indexOf(e),r)},pt=function(n){if(!at(n).length)return[];var t=Wn(at(n));return tt.names().filter(function(n){return t(tt(n))})},Pt=function(n){var t=Qn(at(n));return tt.names().filter(function(n){return t(tt(n))})},Mt=et.names,ht=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),vt=function(n,t){return void 0===t&&(t={}),function(e){return t[e]||(t[e]=n(e))}}(function(n){var t=et(n);if(!t)return ht;var e={intervals:t,name:n};return e.chroma=Bn(t),e.setnum=parseInt(e.chroma,2),e.names=et.names(e.chroma),e}),yt=function(n){return vt(Tt(n)[1]).intervals};function bt(n,t){if(t)return vt(t).intervals.map(Tn(n));var e=Tt(n),r=e[0],i=e[1];return vt(i).intervals.map(Tn(r))}var gt=function(n){return void 0!==et(Tt(n)[1])},At=function(n){if(!yt(n).length)return[];var t=Wn(yt(n));return et.names().filter(function(n){return t(et(n))})},_t=function(n){var t=Qn(yt(n));return et.names().filter(function(n){return t(et(n))})},Ot=/^(6|64|7|9|11|13)$/;function Tt(n){var t=M(n);return""===t[0]?["",n]:"A"===t[0]&&"ug"===t[3]?["","aug"]:Ot.test(t[2])?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+t[2],t[3]]}e.d(t,"transpose",function(){return jt}),e.d(t,"interval",function(){return wt}),e.d(t,"note",function(){return Et}),e.d(t,"midi",function(){return Ct}),e.d(t,"freq",function(){return It}),e.d(t,"chord",function(){return Nt}),e.d(t,"scale",function(){return xt}),e.d(t,"Array",function(){return i}),e.d(t,"Note",function(){return r}),e.d(t,"Interval",function(){return o}),e.d(t,"Distance",function(){return u}),e.d(t,"Scale",function(){return c}),e.d(t,"Chord",function(){return m}),e.d(t,"PcSet",function(){return a}),e.d(t,"Dictionary",function(){return s});const jt=Tn,wt=Sn,Et=y,Ct=A,It=O,Nt=et,xt=tt},function(n){n.exports={chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished:["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus:["1P 2M 3M 4A 6M 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian:["1P 2M 4P 5P 7m"],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]}},function(n){n.exports={4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],M:["1P 3M 5P",["Major",""]],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6:["1P 3M 5P 13M",["6"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69:["1P 3M 5P 6M 9M",["69"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],Maddb9:["1P 3M 5P 9m"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:["1P 3m 5P"],"m#5":["1P 3m 5A",["m+","mb6"]],m11:["1P 3m 5P 7m 9M 11P",["_11"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],"m7#5":["1P 3m 6m 7m"],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],"m9#5":["1P 3m 6m 7m 9M"],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],"+add#9":["1P 3M 5A 9A"],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"]}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(2);t.scale=r.getScale,t.mode=r.getScale,t.scales=r.scales,t.modes=r.scales;var i=e(1);t.chord=i.getChord,t.chords=i.chords;var o=e(3);t.clip=o.clip;var u=e(9);t.getChordDegrees=u.getChordDegrees,t.getChordsByProgression=u.getChordsByProgression,t.progression=u.progression;var a=e(10);t.arp=a.arp;var s=e(11);t.midi=s.midi;var c=e(15);t.Session=c.Session},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),i=function(n){return void 0===n&&(n=1),Math.round(Math.random()*n)};n.exports=function(n){var t,e,o;if(!n.pattern)throw new Error("No pattern provided!");if(!(n.player||n.instrument||n.sample||n.buffer||n.synth||n.sampler||n.samples))throw new Error("No player or instrument provided!");var u,a=[];return n.effects&&(a=n.effects.map(function(n){return new Tone[n]})),(n.sample||n.buffer)&&(n.player=new Tone.Player(n.sample||n.buffer)),n.samples&&(n.sampler=new Tone.Sampler(n.samples)),n.synth&&(n.instrument=new Tone[n.synth]),n.player?(n.volume&&(n.player.volume.value=n.volume),(t=n.player).chain.apply(t,a.concat([Tone.Master])),new Tone.Sequence((u=n.player,function(n,t){("x"===t||"R"===t&&i())&&u.start(n)}),r.expandStr(n.pattern),n.subdiv||"4n")):n.sampler?(n.volume&&(n.sampler.volume.value=n.volume),(e=n.sampler).chain.apply(e,a.concat([Tone.Master])),new Tone.Sequence(function(n){var t=0;return function(e,r){("x"===r&&n.notes[t]||"R"===r&&!n.randomNotes&&i()||"R"===r&&n.randomNotes)&&(n.sampler.triggerAttackRelease("R"===r&&n.randomNotes?n.randomNotes[i(n.randomNotes.length-1)]:n.notes[t],n.dur||n.subdiv||"8n",e),++t===n.notes.length&&(t=0))}}(n),r.expandStr(n.pattern),n.subdiv||"4n")):n.instrument?(n.volume&&(n.instrument.volume.value=n.volume),(o=n.instrument).chain.apply(o,a.concat([Tone.Master])),new Tone.Sequence(n.instrument.voices?function(n){var t=0;return function(e,r){("x"===r&&n.notes[t]||"R"===r&&!n.randomNotes&&i()||"R"===r&&n.randomNotes)&&(n.instrument.triggerAttackRelease("R"===r&&n.randomNotes?n.randomNotes[i(n.randomNotes.length-1)]:n.notes[t],n.dur||n.subdiv||"8n",e),++t===n.notes.length&&(t=0))}}(n):function(n){var t=0;return function(e,r){("x"===r&&n.notes[t]||"R"===r&&!n.randomNotes&&i()||"R"===r&&n.randomNotes)&&(n.instrument.triggerAttackRelease("R"===r&&n.randomNotes?n.randomNotes[i(n.randomNotes.length-1)]:n.notes[t][0],n.dur||n.subdiv||"8n",e),++t===n.notes.length&&(t=0))}}(n),r.expandStr(n.pattern),n.subdiv||"4n")):void 0}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(2),i=e(0);t.getChordDegrees=function(n){var t={ionian:["I","ii","iii","IV","V","vi","vii°"],dorian:["i","ii","III","IV","v","vi°","VII"],phrygian:["i","II","III","iv","v°","VI","vii"],lydian:["I","II","iii","iv°","V","vi","vii"],mixolydian:["I","ii","iii°","IV","v","vi","VII"],aeolian:["i","ii°","III","iv","v","VI","VII"],locrian:["i°","II","iii","iv","V","VI","vii"],"melodic minor":["i","ii","III+","IV","V","vi°","vii°"],"harmonic minor":["i","ii°","III+","iv","V","VI","vii°"]};return t.major=t.ionian,t.minor=t.aeolian,t[n]||[]};var o={i:0,ii:1,iii:2,iv:3,v:4,vi:5,vii:6};t.getChordsByProgression=function(n,t){var e=n.split(" ");e[0].match(/\d/)||(e[0]+="4",n=e.join(" "));var i=r.getScale(n);return t.replace(/\s*,+\s*/g," ").split(" ").map(function(n,t){var e=function(n){var t=n.replace(/\W/g,""),e="M";return t.toLowerCase()===t&&(e="m"),n.includes("°")?e+"7b5":n.includes("+")?e+"#5":n.includes("7")?"M"===e?"Maj7":"m7":e}(n),r=o[n.replace(/\W|\d/g,"").toLowerCase()],u=i[r],a=u.replace(/\D+/,"");return u.replace(/\d/,"")+e+"-"+a}).toString().replace(/,/g," ")};var u=function(n){var t=n.T,e=n.P,r=n.D;return function(n){void 0===n&&(n=4);var o=[];o.push(i.pickOne(t));var u=1;for(u<n-1&&(o.push(i.pickOne(e)),u++),u<n-1&&i.dice()&&(o.push(i.pickOne(e)),u++),u<n-1&&(o.push(i.pickOne(r)),u++),u<n-1&&(o.push(i.pickOne(e)),u++),u<n-1&&(o.push(i.pickOne(r)),u++),u<n-1&&i.dice()&&(o.push(i.pickOne(e)),u++);u<n;)o.push(i.pickOne(r)),u++;return o}},a=u({T:["I","vi"],P:["ii","IV"],D:["V"]}),s=u({T:["i","VI"],P:["ii","iv"],D:["V"]});t.progression=function(n,t){return void 0===t&&(t=4),"major"===n||"M"===n?a(t):"minor"===n||"m"===n?s(t):void 0}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(1);t.arp=function(n){var t=[],e={count:4,order:"0123",chords:""};if("string"==typeof n)e.chords=n;else{if(n.order&&n.order.match(/\D/g))throw new TypeError("Invalid value for order");if(n.count>8||n.count<2)throw new TypeError("Invalid value for count");n.count&&!n.order&&(e.order=Array.from(Array(n.count).keys()).join("")),Object.assign(e,n)}for(var i=function(n){var i,o,u,a,s,c=(i=r.getChord(n),o=e.count,u=function(n){return n.replace(/\d/,"")+(+n.replace(/\D/g,"")+1)},a=i.map(u),s=a.map(u),i.concat(a,s).slice(0,o)),m=e.order.split("").map(function(n){return c[n]});t=t.concat(m)},o=0,u=e.chords.split(" ");o<u.length;o++){i(u[o])}return t}},function(n,t,e){"use strict";var r=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},i=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(e(12)),u=i(e(13));t.midi=function(n,t){void 0===t&&(t="music.mid");var e=function(n){var t=new u.File,e=new u.Track;t.addTrack(e);for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o.level||127;o.note?"string"==typeof o.note?(e.noteOn(0,o.note,o.length,a),e.noteOff(0,o.note,o.length,a)):e.addChord(0,o.note,o.length,a):e.noteOff(0,"",o.length)}return t}(n).toBytes();if(null===t)return e;t.endsWith(".mid")||(t+=".mid"),o.default.writeFileSync(t,e,"binary"),console.log("MIDI file generated: "+t+".")}},function(t,e){t.exports=n},function(n,t,e){(function(n){var e={};!function(n){var t=n.DEFAULT_VOLUME=90,e=(n.DEFAULT_DURATION=128,n.DEFAULT_CHANNEL=0,{midi_letter_pitches:{a:21,b:23,c:12,d:14,e:16,f:17,g:19},midiPitchFromNote:function(n){var t=/([a-g])(#+|b+)?([0-9]+)$/i.exec(n),r=t[1].toLowerCase(),i=t[2]||"";return 12*parseInt(t[3],10)+e.midi_letter_pitches[r]+("#"==i.substr(0,1)?1:-1)*i.length},ensureMidiPitch:function(n){return"number"!=typeof n&&/[^0-9]/.test(n)?e.midiPitchFromNote(n):parseInt(n,10)},midi_pitches_letter:{12:"c",13:"c#",14:"d",15:"d#",16:"e",17:"f",18:"f#",19:"g",20:"g#",21:"a",22:"a#",23:"b"},midi_flattened_notes:{"a#":"bb","c#":"db","d#":"eb","f#":"gb","g#":"ab"},noteFromMidiPitch:function(n,t){var r,i=0,o=n;t=t||!1;return n>23&&(o=n-12*(i=Math.floor(n/12)-1)),r=e.midi_pitches_letter[o],t&&r.indexOf("#")>0&&(r=e.midi_flattened_notes[r]),r+i},mpqnFromBpm:function(n){var t=Math.floor(6e7/n),e=[];do{e.unshift(255&t),t>>=8}while(t);for(;e.length<3;)e.push(0);return e},bpmFromMpqn:function(n){if(void 0!==n[0]){0;for(var t=0,e=n.length-1;e>=0;++t,--e)n[t]<<e}return Math.floor(6e7/n)},codes2Str:function(n){return String.fromCharCode.apply(null,n)},str2Bytes:function(n,t){if(t)for(;n.length/2<t;)n="0"+n;for(var e=[],r=n.length-1;r>=0;r-=2){var i=0===r?n[r]:n[r-1]+n[r];e.unshift(parseInt(i,16))}return e},translateTickTime:function(n){for(var t=127&n;n>>=7;)t<<=8,t|=127&n|128;for(var e=[];e.push(255&t),128&t;)t>>=8;return e}}),r=function(n){if(!this)return new r(n);!n||null===n.type&&void 0===n.type||null===n.channel&&void 0===n.channel||null===n.param1&&void 0===n.param1||(this.setTime(n.time),this.setType(n.type),this.setChannel(n.channel),this.setParam1(n.param1),this.setParam2(n.param2))};r.NOTE_OFF=128,r.NOTE_ON=144,r.AFTER_TOUCH=160,r.CONTROLLER=176,r.PROGRAM_CHANGE=192,r.CHANNEL_AFTERTOUCH=208,r.PITCH_BEND=224,r.prototype.setTime=function(n){this.time=e.translateTickTime(n||0)},r.prototype.setType=function(n){if(n<r.NOTE_OFF||n>r.PITCH_BEND)throw new Error("Trying to set an unknown event: "+n);this.type=n},r.prototype.setChannel=function(n){if(n<0||n>15)throw new Error("Channel is out of bounds.");this.channel=n},r.prototype.setParam1=function(n){this.param1=n},r.prototype.setParam2=function(n){this.param2=n},r.prototype.toBytes=function(){var n=[],t=this.type|15&this.channel;return n.push.apply(n,this.time),n.push(t),n.push(this.param1),void 0!==this.param2&&null!==this.param2&&n.push(this.param2),n};var i=function(n){if(!this)return new i(n);this.setTime(n.time),this.setType(n.type),this.setData(n.data)};i.SEQUENCE=0,i.TEXT=1,i.COPYRIGHT=2,i.TRACK_NAME=3,i.INSTRUMENT=4,i.LYRIC=5,i.MARKER=6,i.CUE_POINT=7,i.CHANNEL_PREFIX=32,i.END_OF_TRACK=47,i.TEMPO=81,i.SMPTE=84,i.TIME_SIG=88,i.KEY_SIG=89,i.SEQ_EVENT=127,i.prototype.setTime=function(n){this.time=e.translateTickTime(n||0)},i.prototype.setType=function(n){this.type=n},i.prototype.setData=function(n){this.data=n},i.prototype.toBytes=function(){if(!this.type)throw new Error("Type for meta-event not specified.");var n=[];if(n.push.apply(n,this.time),n.push(255,this.type),Array.isArray(this.data))n.push(this.data.length),n.push.apply(n,this.data);else if("number"==typeof this.data)n.push(1,this.data);else if(null!==this.data&&void 0!==this.data){n.push(this.data.length);var t=this.data.split("").map(function(n){return n.charCodeAt(0)});n.push.apply(n,t)}else n.push(0);return n};var o=function(n){if(!this)return new o(n);var t=n||{};this.events=t.events||[]};o.START_BYTES=[77,84,114,107],o.END_BYTES=[0,255,47,0],o.prototype.addEvent=function(n){return this.events.push(n),this},o.prototype.addNoteOn=o.prototype.noteOn=function(n,i,o,u){return this.events.push(new r({type:r.NOTE_ON,channel:n,param1:e.ensureMidiPitch(i),param2:u||t,time:o||0})),this},o.prototype.addNoteOff=o.prototype.noteOff=function(n,i,o,u){return this.events.push(new r({type:r.NOTE_OFF,channel:n,param1:e.ensureMidiPitch(i),param2:u||t,time:o||0})),this},o.prototype.addNote=o.prototype.note=function(n,t,e,r,i){return this.noteOn(n,t,r,i),e&&this.noteOff(n,t,e,i),this},o.prototype.addChord=o.prototype.chord=function(n,t,e,r){if(!Array.isArray(t)&&!t.length)throw new Error("Chord must be an array of pitches");return t.forEach(function(t){this.noteOn(n,t,0,r)},this),t.forEach(function(t,r){0===r?this.noteOff(n,t,e):this.noteOff(n,t)},this),this},o.prototype.setInstrument=o.prototype.instrument=function(n,t,e){return this.events.push(new r({type:r.PROGRAM_CHANGE,channel:n,param1:t,time:e||0})),this},o.prototype.setTempo=o.prototype.tempo=function(n,t){return this.events.push(new i({type:i.TEMPO,data:e.mpqnFromBpm(n),time:t||0})),this},o.prototype.toBytes=function(){var n=0,t=[],r=o.START_BYTES,i=o.END_BYTES;this.events.forEach(function(e){var r=e.toBytes();n+=r.length,t.push.apply(t,r)}),n+=i.length;var u=e.str2Bytes(n.toString(16),4);return r.concat(u,t,i)};var u=function(n){if(!this)return new u(n);var t=n||{};if(t.ticks){if("number"!=typeof t.ticks)throw new Error("Ticks per beat must be a number!");if(t.ticks<=0||t.ticks>=32768||t.ticks%1!=0)throw new Error("Ticks per beat must be an integer between 1 and 32767!")}this.ticks=t.ticks||128,this.tracks=t.tracks||[]};u.HDR_CHUNKID="MThd",u.HDR_CHUNK_SIZE="\0\0\0",u.HDR_TYPE0="\0\0",u.HDR_TYPE1="\0",u.prototype.addTrack=function(n){return n?(this.tracks.push(n),this):(n=new o,this.tracks.push(n),n)},u.prototype.toBytes=function(){var n=this.tracks.length.toString(16),t=u.HDR_CHUNKID+u.HDR_CHUNK_SIZE;return parseInt(n,16)>1?t+=u.HDR_TYPE1:t+=u.HDR_TYPE0,t+=e.codes2Str(e.str2Bytes(n,2)),t+=String.fromCharCode(this.ticks/256,this.ticks%256),this.tracks.forEach(function(n){t+=e.codes2Str(n.toBytes())}),t},n.Util=e,n.File=u,n.Track=o,n.Event=r,n.MetaEvent=i}(e),null!==n?n.exports=e:null!==t?t=e:this.Midi=e}).call(this,e(14)(n))},function(n,t){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(16),i=function(){function n(n){n=n||[],this.sessionChannels=n.map(function(n,t){return n.idx=n.idx||t,new r.Channel(n)})}return n.prototype.createChannel=function(n){n.idx=n.idx||this.sessionChannels.length,this.sessionChannels.push(new r.Channel(n))},Object.defineProperty(n.prototype,"channels",{get:function(){return this.sessionChannels},enumerable:!0,configurable:!0}),n.prototype.startRow=function(n){this.sessionChannels.forEach(function(t){t.startClip(n)})},n}();t.Session=i},function(n,t,e){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},i=this&&this.__rest||function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&(e[r[i]]=n[r[i]])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=e(3),u=function(){var n=Tone.Transport.position.split(":");return"0"===n[0]&&"0"===n[1]?0:+n[0]+1+":0:0"},a=function(){function n(n){var t=this;this.idx=n.idx,this.activePatternIdx=-1,this.channelClips=[],n.sample&&(this.player=new Tone.Player(n.sample)),n.synth&&(this.instrument=new Tone[n.synth]),n.samples&&(this.sampler=new Tone.Sampler(n.samples));n.clips,n.samples,n.sample,n.synth;var e=i(n,["clips","samples","sample","synth"]);n.clips.forEach(function(n){t.addClip(r({},n,e))},this)}return Object.defineProperty(n.prototype,"clips",{get:function(){return this.channelClips},enumerable:!0,configurable:!0}),n.prototype.startClip=function(n){this.activePatternIdx>-1&&this.activePatternIdx!==n&&this.stopClip(this.activePatternIdx),this.channelClips[n]&&"started"!==this.channelClips[n].state&&(this.activePatternIdx=n,this.channelClips[n].start(u()))},n.prototype.stopClip=function(n){this.channelClips[n].stop(u())},n.prototype.addClip=function(n,t){t=t||this.channelClips.length,n.pattern?this.channelClips[t]=o.clip(r({player:this.player,instrument:this.instrument,sampler:this.sampler},n)):this.channelClips[t]=null},Object.defineProperty(n.prototype,"activeClipIdx",{get:function(){return this.activePatternIdx},enumerable:!0,configurable:!0}),n}();t.Channel=a}])});
